<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create random effects and fixed effects specifications from an mgcv smooth term for use in splinemixmeta. — make_smm_smooth • splinemixmeta</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create random effects and fixed effects specifications from an mgcv smooth term for use in splinemixmeta. — make_smm_smooth"><meta name="description" content="This function is for internal use by splinemixmeta."><meta property="og:description" content="This function is for internal use by splinemixmeta."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">splinemixmeta</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/splinemixmeta.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/perrydv/splinemixmeta/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create random effects and fixed effects specifications from an mgcv smooth term for use in <code>splinemixmeta</code>.</h1>
      <small class="dont-index">Source: <a href="https://github.com/perrydv/splinemixmeta/blob/main/R/make_smm_smooth.R" class="external-link"><code>R/make_smm_smooth.R</code></a></small>
      <div class="d-none name"><code>make_smm_smooth.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is for internal use by <code>splinemixmeta</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make_smm_smooth</span><span class="op">(</span></span>
<span>  <span class="va">smooth</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  vnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  manual_fixed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-smooth">smooth<a class="anchor" aria-label="anchor" href="#arg-smooth"></a></dt>
<dd><p>A term created by <code><a href="https://rdrr.io/pkg/mgcv/man/s.html" class="external-link">mgcv::s()</a></code></p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame containing the variables used in the smooth</p></dd>


<dt id="arg-vnames">vnames<a class="anchor" aria-label="anchor" href="#arg-vnames"></a></dt>
<dd><p>"a vector of names to avoid as dummy variable names in the random effects form",
per <code>help(mgcv::smooth2random)</code>, to which <code>vnames</code> is passed.</p></dd>


<dt id="arg-manual-fixed">manual_fixed<a class="anchor" aria-label="anchor" href="#arg-manual-fixed"></a></dt>
<dd><p>If <code>FALSE</code>, the unpenalized dimensions of the smooth are extracted for use
as fixed effects. If <code>TRUE</code>, the user should provide any desired fixed effects directly. See details.</p></dd>


<dt id="arg-envir">envir<a class="anchor" aria-label="anchor" href="#arg-envir"></a></dt>
<dd><p>The environment in which to evaluate variable names if <code>data</code> is not provided.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with elements <code>basisFxns</code> (the basis functions for the random effects)
and <code>x_fixed</code> (the fixed effects design matrix, or <code>NULL</code> if
<code>manual_fixed</code> is <code>TRUE</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses <code><a href="https://rdrr.io/pkg/mgcv/man/smoothCon.html" class="external-link">mgcv::smoothCon()</a></code> and <code><a href="https://rdrr.io/pkg/mgcv/man/smooth2random.html" class="external-link">mgcv::smooth2random()</a></code> to obtain basis functions, penalty matrix, and
(optionally) fixed effects terms from the <code>smooth</code> specification.</p>
<p>The fixed effects (if <code>manual_fixed</code> is <code>FALSE</code>) represent unpenalized directions of the smooth. Typically, this
means the fixed effects will include linear terms, because splines usually penalize curvature, so any parameters
that give a line are unpenalized. If one is not particularly interested in the linear terms (more generally, unpenalized terms),
then the default of <code>manual_fixed = FALSE</code> is a good option. However, if one is interested in coefficients for the
linear terms, it is important to note that when they are extracted from the basis function setup, they may be (typically will be)
also re-scaled (and it is not particularly easy to determine the scaling factor). Hence, one may prefer to set <code>manual_fixed=FALSE</code>
and provide the linear term directly in the <code>formula</code> argument to <code><a href="splinemixmeta.html">splinemixmeta()</a></code>.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Perry de Valpine, Marcus Beck.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

